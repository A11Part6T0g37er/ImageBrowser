<Page
    x:Class="ImageBrowser.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:ImageBrowser"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
  
    mc:Ignorable="d"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">
    <Page.Resources>

        <Thickness x:Key="LargeItemMargin">8</Thickness>

        <ItemsPanelTemplate x:Key="ImageGridView_ItemsPanelTemplate">
            <ItemsWrapGrid Orientation="Horizontal"
                           HorizontalAlignment="Center" />
        </ItemsPanelTemplate>

        <Style x:Key="ImageGridView_DefaultItemContainerStyle"
               TargetType="GridViewItem">
            <Setter Property="Background"
                    Value="Gray" />
            <Setter Property="Margin"
                    Value="{StaticResource LargeItemMargin}" />
        </Style>

        <CollectionViewSource x:Name="ImageFileCollection" Source="{x:Bind Images}"/>
        <DataTemplate x:Key="ImagesGridCollection_Default" x:DataType="local:ImageFileInfo">
            <Grid Margin="{StaticResource LargeItemMargin}"
                  Width="50" Height="50">
               
                <Image x:Name="ItemImage" Opacity="0" Stretch="UniformToFill" Source="{Binding ImageFile.Path}"/>
                <ToolTipService.ToolTip>
                    <ToolTip x:Name="toolTipImage">
                        <StackPanel Orientation="Vertical">
                            <TextBlock Text="{Binding ImageTitle, Mode=OneWay}" HorizontalAlignment="Center"/>
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Left">
                                <TextBlock Text="{Binding ImageFileType, Mode=OneWay}"/>
                                <TextBlock Text="{Binding ImageName, Mode=OneWay}" 
                                           HorizontalAlignment="Right" Margin="10,0,0,8"/>
                            </StackPanel>
                        </StackPanel>
                    </ToolTip>
                </ToolTipService.ToolTip>
                
            </Grid>
        </DataTemplate>
    </Page.Resources>


    <RelativePanel>
        <Pivot x:Name="leftControlPanel" Title="Image Browser" 
               Margin="25,10,0,20" RelativePanel.Below="TopButtons">
            <PivotItem Header="All">
                <TextBlock Text="all pictures go here." />
            </PivotItem>
            <PivotItem Header="Unsaved">
                <TextBlock Text="other pictures go here." />
            </PivotItem>

        </Pivot>


        <StackPanel x:Name="TopButtons" Orientation="Horizontal" 
                     >
            <Button  Content="Refresh"  ToolTipService.ToolTip="Refresh"  />
            <Button Content="Open"/>
        </StackPanel>

        <Image Stretch="Uniform" Source="Assets\backlit-photography-10.jpg" 
               Width="190" Height="130" RelativePanel.Below="leftControlPanel" Margin="100"/>
        
        <GridView x:Name="PicturesInGrid" IsItemClickEnabled="True" 
                  ItemClick="PicturesInGrid_ItemClick" SelectionMode="Single" 
                  ItemTemplate="{StaticResource ImagesGridCollection_Default}" 
                  ItemsPanel="{StaticResource ImageGridView_ItemsPanelTemplate}"
                  ItemsSource="{x:Bind Images, Mode=OneWay}"
                  Margin="20"
                  RelativePanel.AlignLeftWithPanel="True"
                  RelativePanel.AlignRightWithPanel="True" RelativePanel.Below="leftControlPanel"
                  ItemContainerStyle="{StaticResource ImageGridView_DefaultItemContainerStyle}">
            
        </GridView>

        <Button Grid.Row="1" x:Name="button" Content="Hello, world!" 
               HorizontalAlignment="Center" Margin = "150,60,0,0" VerticalAlignment="Top"
                RelativePanel.AlignRightWith="PicturesInGrid"/>
    </RelativePanel>
</Page>
